extends ./layout.jade

block content
	h1 Petr Ukol
	form(name="form", action="/", method="post", enctype="multipart/form-data")
		textarea(name="text")
		input(type="file", name="file")
		input(type="submit", value="Submit")
	script(type="text/javascript").
		var data = !{numbers};
		var len = data.length;
		if(len>1){
			var scaleY = 280/Math.max.apply(Math, data);
			var scaleX = 580/(len-1);
			var svgNS = "http://www.w3.org/2000/svg";
			var svg = document.createElementNS(svgNS, "svg");
			svg.setAttribute('style','border: 1px solid black');
			svg.setAttribute('width', '600');
			svg.setAttribute('height', '300');
			svg.setAttribute('fill', 'transparent');
			var drowLine = function(x1, y1, x2, y2, width){
				var line = document.createElementNS(svgNS, "line");
				line.setAttribute('x1', x1);
				line.setAttribute('x2', x2);
				line.setAttribute('y1', y1);
				line.setAttribute('y2', y2);
				line.setAttribute('stroke', 'black');
				line.setAttribute('stroke-width', width);
				line.setAttribute('fill', 'transparent');
				svg.appendChild(line);
			}
			drowLine(10, 10, 10, 290, 2);		
			drowLine(10, 290, 590, 290, 2);
			var currentX = 10;
			for(var i = 0; i < len-1; i++){
				drowLine(currentX, 290-data[i]*scaleY, currentX+scaleX, 290-data[i+1]*scaleY, 1);			
				currentX = currentX+scaleX;
			}	
			document.body.appendChild(svg);
		}
